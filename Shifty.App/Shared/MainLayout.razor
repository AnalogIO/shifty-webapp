@using Shifty.App.Authentication
@using Shifty.App.Pages
@using MudBlazor.Utilities
@inject NavigationManager Navigation
@inherits LayoutComponentBase

<MudThemeProvider Theme="_theme"/>
<MudDialogProvider
    CloseOnEscapeKey="true"
/>
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="0">
        <AuthorizeView>
            <Authorized>
                <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((_) => DrawerToggle())"/>
            </Authorized>
        </AuthorizeView>
        <MudText Typo="Typo.h6" Align="Align.Left">Analog Shifty</MudText>
    </MudAppBar>
    <AuthorizeView>
        <Authorized>
            <MudDrawer @bind-Open="_drawerOpen" Elevation="1">
                <MudDrawerHeader>
                    <MudText Typo="Typo.h6">Shifty</MudText>
                </MudDrawerHeader>
                <NavMenu/>
            </MudDrawer>
        </Authorized>
    </AuthorizeView>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    bool _drawerOpen = true;

    readonly MudTheme _theme = new MudTheme()
    {
        Palette = new Palette()
        {
            Primary = new MudColor("#775440"),
            Secondary = new MudColor("#38251a"),
            Tertiary = new MudColor("#8c674c"),
            AppbarBackground = new MudColor("#38251a"),
            Background = new MudColor("#e9e9e9"),
            Info = new MudColor("#20455f"),
            Error = new MudColor("#893c24"),
            Warning = new MudColor("#fed521"),
            Success = new MudColor("#738d4b"),
            Dark = Colors.Grey.Darken3,
        }
    };

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }
}